import{h as t,a7 as d,g as h,x as A,j as b}from"./framework.71e127f7.js";const p=/^([a-zA-Z0-9._%+-]{1,64})@[a-zA-Z0-9.-]{1,255}\.[a-zA-Z]{2,10}$/,g=100,o=t(!1),m=t(!1),E=t(!1),r=d("storedEmail",""),l=d("storedName",""),n=t(!1),s=t(r),c=t(l),i=h(()=>{var e;return z((e=s.value.match(p))==null?void 0:e[1])}),P=t(""),j=t(""),x=h(()=>w(s.value)),v=t(!1);function w(e){return p.test(e)}function z(e=""){return e.charAt(0).toUpperCase()+e.slice(1)}function S(){r.value="",l.value="",n.value=!1,o.value=!1}function Z(){return v.value||(A(o,e=>{e&&(m.value=!1)}),b(()=>{r.value&&(o.value=!0)}),v.value=!0),{isAccessGranted:o,isValidEmail:x,email:s,name:c,grantAccess:F,isSent:n,isFormOpen:m,checkAvailability:E,storedEmail:r,storedName:l,resetEmail:S,namePlaceholder:i,password:P,passwordPlaceholder:j,generatePassword:N,maxLength:g}}async function F(){var e,u,f;if(!(!s.value&&!w(s.value))&&(o.value=!0,!n.value)){n.value=!0;const y={email:s.value,name:(c.value||i.value||"").slice(0,g)};try{r.value=s.value,l.value=c.value||i.value;const a=await fetch("https://db.chromatone.center/flows/trigger/f36a3461-c476-4ce5-88c9-eba2216083b0",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(y)});console.log(await(a==null?void 0:a.json()))}catch(a){console.error(a,(u=(e=a==null?void 0:a.errors)==null?void 0:e[0])==null?void 0:u.message,(f=a==null?void 0:a.response)==null?void 0:f.status)}}}function N(){return[...window.crypto.getRandomValues(new Uint8Array(16))].map(e=>"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_.,!?$%&*#@".charAt(e%72)).join("").slice(0,10)}export{Z as u};
