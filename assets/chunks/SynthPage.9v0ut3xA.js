import{u as b,b as w,_ as p}from"./useClicks.CUHhquVm.js";import{r as g,w as S,o as _,f as l,h as i,k as t,j as C,v as B,q as N,J as $,D as v,E as m,T as z,t as s,F as D,l as k,K as L,A as c,u as V,I as F,L as I,m as T}from"./framework.Ch2f3zJW.js";const A={class:"flex flex-col gap-4 bg-light-300 dark-bg-dark-300 rounded-lg shadow-xl overflow-hidden mx-auto relative mb-0"},E={class:"h-85vh h-85svh"},j=["title","src"],q={class:"px-2"},J={class:"flex flex-col p-4 gap-1 bottom-0 bg-light-100 dark-bg-dark-800 w-full max-w-180 mx-auto relative bg-op-90 backdrop-blur dark-bg-op-90 rounded"},K={class:"text-xl flex items-center gap-4"},M={class:"font-bold"},P=t("div",{class:"flex-auto"},null,-1),G={class:"p-0 flex gap-4"},H=["href"],O={class:"px-2 py-0 bg-light-800 dark-bg-dark-800 rounded-xl transition text-sm select-none text-center z-200 flex items-center gap-1 opacity-40 hover-opacity-100 transition"},Q=t("div",{class:"i-la-eye"},null,-1),R={key:0,class:"flex-1 flex items-end flex flex-wrap gap-2"},U={key:1,class:"p-0"},Y={__name:"SynthPage",props:{title:{type:String,default:""},description:{type:String,default:""},author:{type:String,default:""},author_link:{type:String,default:""},cover:{type:String,default:""},slug:{type:String,default:""},url:{type:String,default:""},tags:{type:Array,default:[]},archive:{type:Boolean,default:!1},archive_link:{type:String,default:""},iframe:{type:Boolean,default:!1},clicks:{type:Number,default:0},id:{type:Number,default:0}},setup(e){const d=e,n=g(!1),{clickSynth:y,clicksCount:u}=b(d.id);S(()=>d.clicks,a=>u.value=a,{immediate:!0});const f=g(0);return _(async()=>{await y();let a=await w("synth_stats",d.id);f.value=(a==null?void 0:a.stars)||0}),(a,o)=>{var h;const x=p;return l(),i("div",A,[t("div",E,[C(t("div",{class:N(["h-90vh h-90svh bg-cover bg-center absolute z-100 w-full",{"animate-pulse":e.iframe&&!n.value}]),onClick:o[0]||(o[0]=r=>n.value=!0),style:$({backgroundImage:`url(/cover/${e.slug}.webp)`})},null,6),[[B,!n.value]]),v(z,{name:"fade"},{default:m(()=>[t("iframe",{class:"w-full h-90vh h-90svh bg-light-100 dark-bg-dark-800 fixed top-0",allow:"midi *",onLoad:o[1]||(o[1]=r=>n.value=!0),title:e.title,src:e.archive?e.archive_link:e.url},null,40,j)]),_:1})]),t("div",q,[t("div",J,[t("div",K,[t("div",M,s(e.title),1),e.author?(l(),D(L(e.author_link?"a":"div"),{key:0,class:"text-lg font-300",target:"_blank",href:e.author_link},{default:m(()=>[k("by "+s(e.author),1)]),_:1},8,["href"])):c("",!0),P,v(x,{id:e.id,stars:f.value},null,8,["id","stars"])]),t("div",G,[t("a",{class:"my-2 font-mono text-sm",href:e.url,target:"_blank"},s(e.url),9,H),t("div",O,[k(s(V(u)),1),Q])]),((h=e.tags)==null?void 0:h.length)>0?(l(),i("div",R,[(l(!0),i(F,null,I(e.tags,r=>(l(),i("div",{class:"px-2 py-1 text-sm bg-light-800 dark-bg-dark-500 rounded-lg",key:r},s(r),1))),128))])):c("",!0),e.description?(l(),i("div",U,s(e.description),1)):c("",!0),T(a.$slots,"default")])])])}}};export{Y as _};
