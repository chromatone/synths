import{M as b,r as t,N as g,h as y,s as S,e as j}from"./framework.7647b01d.js";const f=b("history"),w=/^([a-zA-Z0-9._%+-]{1,64})@[a-zA-Z0-9.-]{1,255}\.[a-zA-Z]{2,10}$/,A=100,c=t(!1),h=t(!1),E=t(!1),s=g("storedEmail",""),i=g("storedName",""),l=t(!1),o=t(s),d=t(i),m=y(()=>{var a;return T((a=o.value.match(w))==null?void 0:a[1])}),N=t(""),O=t(""),z=y(()=>P(o.value)),p=t(!1),v=t(!1);function P(a){return w.test(a)}function T(a=""){return a.charAt(0).toUpperCase()+a.slice(1)}function k(){s.value="",i.value="",l.value=!1,c.value=!1}function I(){return p.value||(S(c,a=>{a&&(h.value=!1)}),j(()=>{s.value&&(c.value=!0),f.token&&x()}),p.value=!0),{searchParams:f,isAccessGranted:c,isValidEmail:z,email:o,name:d,grantAccess:F,isSent:l,isFormOpen:h,checkAvailability:E,storedEmail:s,storedName:i,resetEmail:k,namePlaceholder:m,password:N,passwordPlaceholder:O,generatePassword:U,maxLength:A,claimInvite:C,invited:v}}async function x(){console.log(f.token,s.value)}async function C(){var a,r,n;if(s.value&&!v.value){const u={email:s.value};try{const e=await fetch("https://db.chromatone.center/flows/trigger/c5ef0e6e-453d-4698-a995-e749dd331b7d",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(u)});console.log(await(e==null?void 0:e.json()))}catch(e){console.error(e,(r=(a=e==null?void 0:e.errors)==null?void 0:a[0])==null?void 0:r.message,(n=e==null?void 0:e.response)==null?void 0:n.status)}v.value=!0}}async function F(){var a,r,n;if(!(!o.value&&!P(o.value))&&(c.value=!0,!l.value)){l.value=!0;const u={email:o.value,name:(d.value||m.value||"").slice(0,A)};try{s.value=o.value,i.value=d.value||m.value;const e=await fetch("https://db.chromatone.center/flows/trigger/f36a3461-c476-4ce5-88c9-eba2216083b0",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(u)});console.log(await(e==null?void 0:e.json()))}catch(e){console.error(e,(r=(a=e==null?void 0:e.errors)==null?void 0:a[0])==null?void 0:r.message,(n=e==null?void 0:e.response)==null?void 0:n.status)}}}function U(){return[...window.crypto.getRandomValues(new Uint8Array(16))].map(a=>"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_.,!?$%&*#@".charAt(a%72)).join("").slice(0,10)}export{I as u};
