import{A as y,r as p,o as l,c as u,f as v}from"./framework.94NFGJWp.js";import{c as b,e as w}from"./index.8xYqPcTb.js";import{w as g,j as k,l as S,S as _}from"./chunk-LDFD35JM.27RXxW-q.js";const n=b("favourites",{3:"default",29:"default",39:"default"}),j={key:0,class:"i-la-star"},C={key:1,class:"i-la-star-solid text-yellow"},O={__name:"SynthFav",props:{id:{type:Number,default:0},stars:{type:Number,default:0}},setup(o){const e=o,s=y(()=>n.value[e.id]),a=p(e.stars);async function t(){if((n.value[e.id]===void 0||n.value[e.id]===null)&&h(e.id),n.value[e.id]==="default"){n.value[e.id]=null;return}n.value[e.id]=!n.value[e.id]}async function h(f){var c,i,d;try{const r=await fetch("https://dbs.chromatone.center/flows/trigger/f235dc43-5911-4a7a-8327-5a5c39beb3b2",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({id:f})});a.value=await(r==null?void 0:r.json())}catch(r){console.error(r,(i=(c=r==null?void 0:r.errors)==null?void 0:c[0])==null?void 0:i.message,(d=r==null?void 0:r.response)==null?void 0:d.status)}}return(f,c)=>(l(),u("button",{class:"p-0 cursor-pointer flex items-center gap-1 justify-center relative",onClick:c[0]||(c[0]=v(i=>t(),["stop","prevent"])),title:"Toggle star"},[s.value?(l(),u("div",C)):(l(),u("div",j))]))}},m=g("https://dbs.chromatone.center/").with(k());async function P(o,e){try{return await m.request(_(o,e))}catch(s){console.log(s)}}async function q(o,e,s){try{return await m.request(S(o,e,s))}catch(a){console.log(a)}}async function T(o){var e,s,a;try{const t=await fetch("https://dbs.chromatone.center/flows/trigger/96844b2f-abd0-41ed-bfe1-c5bcf788a98d",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({id:o})});return await(t==null?void 0:t.json())}catch(t){console.error(t,(s=(e=t==null?void 0:t.errors)==null?void 0:e[0])==null?void 0:s.message,(a=t==null?void 0:t.response)==null?void 0:a.status)}}function B(o,e=0){const s=p(e),a=w(T,1e4);async function t(){s.value=await a(o)}return{clicksCount:s,clickSynth:t}}export{O as _,P as a,q as b,n as f,B as u};
