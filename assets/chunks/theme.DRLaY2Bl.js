const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/virtual_pwa-register.BritzuXO.js","assets/chunks/framework.Ch2f3zJW.js"])))=>i.map(i=>d[i]);
import{u as g,o as re,n as oe,r as k,a as Te,w as V,g as ve,i as X,b as Ce,c as Fe,s as Ne,d as ie,e as M,f as O,h as T,j as Z,v as Pe,k as h,t as Q,l as R,m as le,p as ce,q as ue,x as de,_ as Ve,y as je,z as De,A as ge,B as Re,C as We,D as L,E as J,T as Me,F as ze}from"./framework.Ch2f3zJW.js";function se(e){return Ce()?(Fe(e),!0):!1}function S(e){return typeof e=="function"?e():g(e)}const ye=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ie=e=>e!=null,Le=Object.prototype.toString,Je=e=>Le.call(e)==="[object Object]",j=()=>{};function be(e,t){function n(...r){return new Promise((a,o)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(a).catch(o)})}return n}const we=e=>e();function Be(...e){let t=0,n,r=!0,a=j,o,u,c,d,p;!X(e[0])&&typeof e[0]=="object"?{delay:u,trailing:c=!0,leading:d=!0,rejectOnCancel:p=!1}=e[0]:[u,c=!0,d=!0,p=!1]=e;const s=()=>{n&&(clearTimeout(n),n=void 0,a(),a=j)};return y=>{const b=S(u),w=Date.now()-t,_=()=>o=y();return s(),b<=0?(t=Date.now(),_()):(w>b&&(d||!r)?(t=Date.now(),_()):c&&(o=new Promise((x,f)=>{a=p?f:x,n=setTimeout(()=>{t=Date.now(),r=!0,x(_()),s()},Math.max(0,b-w))})),!d&&!n&&(n=setTimeout(()=>r=!0,b)),r=!1,o)}}function Ue(e=we){const t=k(!0);function n(){t.value=!1}function r(){t.value=!0}const a=(...o)=>{t.value&&e(...o)};return{isActive:Te(t),pause:n,resume:r,eventFilter:a}}function Ge(e,t=!1,n="Timeout"){return new Promise((r,a)=>{setTimeout(t?()=>a(n):r,e)})}function Ke(e){return e}function He(e){return ve()}function sn(e,t=200,n=!1,r=!0,a=!1){return be(Be(t,n,r,a),e)}function Ye(e,t,n={}){const{eventFilter:r=we,...a}=n;return V(e,be(r,t),a)}function _e(e,t,n={}){const{eventFilter:r,...a}=n,{eventFilter:o,pause:u,resume:c,isActive:d}=Ue(r);return{stop:Ye(e,t,{...a,eventFilter:o}),pause:u,resume:c,isActive:d}}function Ze(e,t=!0,n){He()?re(e,n):t?e():oe(e)}function ln(e,t,n){const r=V(e,(...a)=>(oe(()=>r()),t(...a)),n);return r}function G(e){var t;const n=S(e);return(t=n==null?void 0:n.$el)!=null?t:n}const D=ye?window:void 0,qe=ye?window.navigator:void 0;function K(...e){let t,n,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,a]=e,t=D):[t,n,r,a]=e,!t)return j;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],u=()=>{o.forEach(s=>s()),o.length=0},c=(s,i,y,b)=>(s.addEventListener(i,y,b),()=>s.removeEventListener(i,y,b)),d=V(()=>[G(t),S(a)],([s,i])=>{if(u(),!s)return;const y=Je(i)?{...i}:i;o.push(...n.flatMap(b=>r.map(w=>c(s,b,w,y))))},{immediate:!0,flush:"post"}),p=()=>{d(),u()};return se(p),p}function Xe(){const e=k(!1),t=ve();return t&&re(()=>{e.value=!0},t),e}function xe(e){const t=Xe();return M(()=>(t.value,!!e()))}const B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U="__vueuse_ssr_handlers__",Qe=et();function et(){return U in B||(B[U]=B[U]||{}),B[U]}function tt(e,t){return Qe[e]||t}function nt(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const at={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},fe="vueuse-storage";function Se(e,t,n,r={}){var a;const{flush:o="pre",deep:u=!0,listenToStorageChanges:c=!0,writeDefaults:d=!0,mergeDefaults:p=!1,shallow:s,window:i=D,eventFilter:y,onError:b=v=>{console.error(v)},initOnMounted:w}=r,_=(s?Ne:k)(typeof t=="function"?t():t);if(!n)try{n=tt("getDefaultStorage",()=>{var v;return(v=D)==null?void 0:v.localStorage})()}catch(v){b(v)}if(!n)return _;const x=S(t),f=nt(x),l=(a=r.serializer)!=null?a:at[f],{pause:m,resume:$}=_e(_,()=>F(_.value),{flush:o,deep:u,eventFilter:y});i&&c&&Ze(()=>{n instanceof Storage?K(i,"storage",N):K(i,fe,Oe),w&&N()}),w||N();function z(v,A){if(i){const E={key:e,oldValue:v,newValue:A,storageArea:n};i.dispatchEvent(n instanceof Storage?new StorageEvent("storage",E):new CustomEvent(fe,{detail:E}))}}function F(v){try{const A=n.getItem(e);if(v==null)z(A,null),n.removeItem(e);else{const E=l.write(v);A!==E&&(n.setItem(e,E),z(A,E))}}catch(A){b(A)}}function I(v){const A=v?v.newValue:n.getItem(e);if(A==null)return d&&x!=null&&n.setItem(e,l.write(x)),x;if(!v&&p){const E=l.read(A);return typeof p=="function"?p(E,x):f==="object"&&!Array.isArray(E)?{...x,...E}:E}else return typeof A!="string"?A:l.read(A)}function N(v){if(!(v&&v.storageArea!==n)){if(v&&v.key==null){_.value=x;return}if(!(v&&v.key!==e)){m();try{(v==null?void 0:v.newValue)!==l.write(_.value)&&(_.value=I(v))}catch(A){b(A)}finally{v?oe($):$()}}}}function Oe(v){N(v.detail)}return _}function rt(e,t,n={}){const{root:r,rootMargin:a="0px",threshold:o=0,window:u=D,immediate:c=!0}=n,d=xe(()=>u&&"IntersectionObserver"in u),p=M(()=>{const w=S(e);return(Array.isArray(w)?w:[w]).map(G).filter(Ie)});let s=j;const i=k(c),y=d.value?V(()=>[p.value,G(r),i.value],([w,_])=>{if(s(),!i.value||!w.length)return;const x=new IntersectionObserver(t,{root:G(_),rootMargin:a,threshold:o});w.forEach(f=>f&&x.observe(f)),s=()=>{x.disconnect(),s=j}},{immediate:c,flush:"post"}):j,b=()=>{s(),y(),i.value=!1};return se(b),{isSupported:d,isActive:i,pause(){s(),i.value=!1},resume(){i.value=!0},stop:b}}function cn(e,t={}){const{window:n=D,scrollTarget:r,threshold:a=0}=t,o=k(!1);return rt(e,u=>{let c=o.value,d=0;for(const p of u)p.time>=d&&(d=p.time,c=p.isIntersecting);o.value=c},{root:r,window:n,threshold:a}),o}function un(e={},t={}){const{navigator:n=qe}=t,r=n,a=xe(()=>r&&"canShare"in r);return{isSupported:a,share:async(u={})=>{if(a.value){const c={...S(e),...S(u)};let d=!0;if(c.files&&r.canShare&&(d=r.canShare({files:c.files})),d)return r.share(c)}}}}function ot([e,t,n,r]){const a=(s,i)=>1-3*i+3*s,o=(s,i)=>3*i-6*s,u=s=>3*s,c=(s,i,y)=>((a(i,y)*s+o(i,y))*s+u(i))*s,d=(s,i,y)=>3*a(i,y)*s*s+2*o(i,y)*s+u(i),p=s=>{let i=s;for(let y=0;y<4;++y){const b=d(i,e,n);if(b===0)return i;const w=c(i,e,n)-s;i-=w/b}return i};return s=>e===t&&n===r?s:c(p(s),t,r)}function me(e,t,n){return e+n*(t-e)}function q(e){return(typeof e=="number"?[e]:e)||[]}function st(e,t,n,r={}){var a,o;const u=S(t),c=S(n),d=q(u),p=q(c),s=(a=S(r.duration))!=null?a:1e3,i=Date.now(),y=Date.now()+s,b=typeof r.transition=="function"?r.transition:(o=S(r.transition))!=null?o:Ke,w=typeof b=="function"?b:ot(b);return new Promise(_=>{e.value=u;const x=()=>{var f;if((f=r.abort)!=null&&f.call(r)){_();return}const l=Date.now(),m=w((l-i)/s),$=q(e.value).map((z,F)=>me(d[F],p[F],m));Array.isArray(e.value)?e.value=$.map((z,F)=>{var I,N;return me((I=d[F])!=null?I:0,(N=p[F])!=null?N:0,m)}):typeof e.value=="number"&&(e.value=$[0]),l<y?requestAnimationFrame(x):(e.value=c,_())};x()})}function dn(e,t={}){let n=0;const r=()=>{const o=S(e);return typeof o=="number"?o:o.map(S)},a=k(r());return V(r,async o=>{var u,c;if(S(t.disabled))return;const d=++n;if(t.delay&&await Ge(S(t.delay)),d!==n)return;const p=Array.isArray(o)?o.map(S):S(o);(u=t.onStarted)==null||u.call(t),await st(a,a.value,p,{...t,abort:()=>{var s;return d!==n||((s=t.abort)==null?void 0:s.call(t))}}),(c=t.onFinished)==null||c.call(t)},{deep:!0}),V(()=>S(t.disabled),o=>{o&&(n++,a.value=r())}),se(()=>{n++}),M(()=>S(t.disabled)?r():a.value)}function it(e="history",t={}){const{initialValue:n={},removeNullishValues:r=!0,removeFalsyValues:a=!1,write:o=!0,window:u=D}=t;if(!u)return ie(n);const c=ie({});function d(){if(e==="history")return u.location.search||"";if(e==="hash"){const f=u.location.hash||"",l=f.indexOf("?");return l>0?f.slice(l):""}else return(u.location.hash||"").replace(/^#/,"")}function p(f){const l=f.toString();if(e==="history")return`${l?`?${l}`:""}${u.location.hash||""}`;if(e==="hash-params")return`${u.location.search||""}${l?`#${l}`:""}`;const m=u.location.hash||"#",$=m.indexOf("?");return $>0?`${m.slice(0,$)}${l?`?${l}`:""}`:`${m}${l?`?${l}`:""}`}function s(){return new URLSearchParams(d())}function i(f){const l=new Set(Object.keys(c));for(const m of f.keys()){const $=f.getAll(m);c[m]=$.length>1?$:f.get(m)||"",l.delete(m)}Array.from(l).forEach(m=>delete c[m])}const{pause:y,resume:b}=_e(c,()=>{const f=new URLSearchParams("");Object.keys(c).forEach(l=>{const m=c[l];Array.isArray(m)?m.forEach($=>f.append(l,$)):r&&m==null||a&&!m?f.delete(l):f.set(l,m)}),w(f)},{deep:!0});function w(f,l){y(),l&&i(f),u.history.replaceState(u.history.state,u.document.title,u.location.pathname+p(f)),b()}function _(){o&&w(s(),!0)}K(u,"popstate",_,!1),e!=="history"&&K(u,"hashchange",_,!1);const x=s();return x.keys().next().value?i(x):Object.assign(c,n),c}const ee=it("history"),ke=/^([a-zA-Z0-9._%+-]{1,64})@[a-zA-Z0-9.-]{1,255}\.[a-zA-Z]{2,10}$/,Ae=100,W=k(!1),pe=k(!1),lt=k(!1),C=Se("storedEmail",""),Y=Se("storedName",""),H=k(!1),P=k(C),te=k(Y),ne=M(()=>{var e;return ft((e=P.value.match(ke))==null?void 0:e[1])}),ct=k(""),ut=k(""),dt=M(()=>$e(P.value)),he=k(!1),ae=k(!1);function $e(e){return ke.test(e)}function ft(e=""){return e.charAt(0).toUpperCase()+e.slice(1)}function mt(){C.value="",Y.value="",H.value=!1,W.value=!1}function Ee(){return he.value||(V(W,e=>{e&&(pe.value=!1)}),re(()=>{C.value&&(W.value=!0),ee.token&&pt()}),he.value=!0),{searchParams:ee,isAccessGranted:W,isValidEmail:dt,email:P,name:te,grantAccess:vt,isSent:H,isFormOpen:pe,checkAvailability:lt,storedEmail:C,storedName:Y,resetEmail:mt,namePlaceholder:ne,password:ct,passwordPlaceholder:ut,generatePassword:gt,maxLength:Ae,claimInvite:ht,invited:ae}}async function pt(){console.log(ee.token,C.value)}async function ht(){var e,t,n;if(C.value&&!ae.value){const r={email:C.value};try{const a=await fetch("https://dbs.chromatone.center/flows/trigger/164bb1bb-3745-423f-8239-703198dfbac5",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r)});console.log(await(a==null?void 0:a.json()))}catch(a){console.error(a,(t=(e=a==null?void 0:a.errors)==null?void 0:e[0])==null?void 0:t.message,(n=a==null?void 0:a.response)==null?void 0:n.status)}ae.value=!0}}async function vt(){var e,t,n;if(!(!P.value&&!$e(P.value))&&(W.value=!0,!H.value)){H.value=!0;const r={email:P.value,name:(te.value||ne.value||"").slice(0,Ae)};try{C.value=P.value,Y.value=te.value||ne.value;const a=await fetch("https://dbs.chromatone.center/flows/trigger/51cc7591-219e-4b56-ad6d-c39a34f7cf2f",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r)});console.log(await(a==null?void 0:a.json()))}catch(a){console.error(a,(t=(e=a==null?void 0:a.errors)==null?void 0:e[0])==null?void 0:t.message,(n=a==null?void 0:a.response)==null?void 0:n.status)}}}function gt(){return[...window.crypto.getRandomValues(new Uint8Array(16))].map(e=>"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_.,!?$%&*#@".charAt(e%72)).join("").slice(0,10)}const yt={class:"min-h-40dvh bottom-0 w-full bg-light-800 bg-opacity-80 backdrop-blur flex flex-col items-center gap-4 justify-center dark-bg-dark-200 dark-bg-opacity-80 p-8 shadow max-w-180 bottom-0 rounded-xl"},bt={key:0,class:"flex flex-col gap-4 max-w-45ch text-center"},wt={class:"text-3xl font-bold"},_t=h("div",{class:"text-xl"},"You are part of web-musicians community",-1),xt={class:"text-sm flex gap-2 justify-center"},St={key:1,class:"flex flex-col gap-8 relative pt-8 items-center"},kt={class:"text-center max-w-55ch",for:"email"},At={class:"flex gap-4 flex-col w-full"},$t={class:"flex items-center gap-2"},Et=h("div",{class:"p-2 w-24 font-bold text-right"},"E-mail *",-1),Ot=["maxlength"],Tt={class:"flex items-center gap-2"},Ct=h("div",{class:"p-2 w-24 font-bold text-right"},"Name",-1),Ft=["maxlength","placeholder"],Nt=["disabled"],Pt={__name:"FormMain",setup(e){const{name:t,email:n,isValidEmail:r,isFormOpen:a,grantAccess:o,storedEmail:u,storedName:c,resetEmail:d,isAccessGranted:p,namePlaceholder:s,passwordPlaceholder:i,password:y,generatePassword:b,maxLength:w,claimInvite:_,invited:x}=Ee();return k(),(f,l)=>(O(),T("div",yt,[Z(h("button",{class:"i-la-times absolute top-4 right-4 text-2xl hover-opacity-90 opacity-50 transition",onClick:l[0]||(l[0]=m=>a.value=!1)},null,512),[[Pe,g(a)]]),g(p)?(O(),T("div",bt,[h("div",wt,"Hello, "+Q(g(c))+"!",1),_t,h("div",xt,[R(Q(g(u)),1),h("span",{class:"opacity-20 hover-opacity-50 transition cursor-pointer",onClick:l[1]||(l[1]=(...m)=>g(d)&&g(d)(...m))},"Log out")])])):(O(),T("div",St,[h("label",kt,[le(f.$slots,"default")]),h("div",At,[h("label",$t,[Et,Z(h("input",{class:ue(["flex-1 p-4 md-p-4 rounded-xl bg-light-200 shadow-md dark-bg-dark-400 flex-1 border-2 border-solid border-opacity-60 dark-border-opacity-40",{"border-red-700 dark-border-red-300":g(n)&&!g(r),"border-green-700 dark-border-green-800":g(n)&&g(r),"border-light-300":!g(n)}]),ref:"target",maxlength:g(w),"onUpdate:modelValue":l[2]||(l[2]=m=>X(n)?n.value=m:null),id:"email",name:"email",type:"email",onKeydown:l[3]||(l[3]=de(m=>g(o)(),["enter"])),placeholder:"your@gmail.com"},null,42,Ot),[[ce,g(n)]])]),h("label",Tt,[Ct,Z(h("input",{class:"flex-1 p-4 md-p-4 rounded-xl bg-light-200 shadow-md dark-bg-dark-400","onUpdate:modelValue":l[4]||(l[4]=m=>X(t)?t.value=m:null),id:"name",maxlength:g(w),name:"name",type:"text",onKeydown:l[5]||(l[5]=de(m=>g(o)(),["enter"])),placeholder:g(s)},null,40,Ft),[[ce,g(t)]])])]),h("button",{class:ue(["text-sm md-text-md p-4 font-bold md-p-4 rounded-xl shadow-xl hover-shadow-2xl transition -hover-translate-y-2px disabled-opacity-40 active-translate-y-0 active-shadow-md bg-green-400 dark-bg-green-700",{"grayscale-50":!g(r)}]),onClick:l[6]||(l[6]=m=>g(o)()),disabled:!g(r),title:"Your access status will be saved per device and you won't need to enter your e-mail again."},[le(f.$slots,"button",{},()=>[R("GET ACCESS")])],10,Nt)]))]))}},Vt={class:"flex items-center gap-1 p-1 bg-light-100 bg-opacity-90 dark-bg-dark-900 dark-bg-opacity-90 w-full justify-center op-70"},jt=h("div",{class:"p-0"},"Curated with ❤️‍🔥 by",-1),Dt=h("a",{href:"https://shop.playtronica.com",target:"_blank"},"Playtronica ",-1),Rt=h("span",null,"& ",-1),Wt=h("a",{href:"https://chromatone.center",target:"_blank"},"Chromatone",-1),Mt=[jt,Dt,Rt,Wt];function zt(e,t){return O(),T("div",Vt,Mt)}const It={},Lt=Ve(It,[["render",zt]]),Jt={key:0,class:"pwa-toast",role:"alertdialog","aria-labelledby":"pwa-message"},Bt=h("div",{class:"mb-3",id:"pwa-message"},"App ready to work offline",-1),Ut={__name:"RegisterSW",setup(e){const t=k(!1);function n(){t.value=!0}async function r(){t.value=!1}return je(async()=>{const{registerSW:a}=await De(async()=>{const{registerSW:o}=await import("./virtual_pwa-register.BritzuXO.js");return{registerSW:o}},__vite__mapDeps([0,1]));a({immediate:!0,onOfflineReady:n,onRegistered(){console.info("Service Worker registered")},onRegisterError(o){console.error("Service Worker registration error!",o)}})}),(a,o)=>t.value?(O(),T("div",Jt,[Bt,h("button",{class:"pwa-cancel",type:"button",onClick:r},"Close")])):ge("",!0)}},Gt={class:"flex flex-col noise items-center relative min-h-100svh pb-15"},Kt={class:"w-full backdrop-blur-xl fixed bottom-0 z-100 bg-light-200 bg-opacity-60 dark-bg-dark-300 dark-bg-opacity-60 z-200"},Ht={class:"flex flex items-center w-full max-w-180 mx-auto gap-4 px-2"},Yt={class:"p-2 flex items-center gap-4",href:"/"},Zt=["src"],qt={class:"text-xl font-600"},Xt=h("div",{class:"flex-1"},null,-1),Qt={key:0,class:"i-la-sun"},en={key:1,class:"i-tabler-moon-2"},tn=h("div",{class:"i-ph-user-circle-duotone p-5"},null,-1),nn=[tn],an={class:"flex flex-wrap w-full mx-auto flex-auto justify-center mb-12"},rn={__name:"MainLayout",setup(e){const{isFormOpen:t,searchParams:n}=Ee(),{theme:r,site:a,isDark:o}=Re();return(u,c)=>{const d=Ut,p=Lt,s=We("content"),i=Pt;return O(),T("div",Gt,[L(d),h("div",Kt,[h("div",Ht,[h("a",Yt,[h("img",{class:"w-12",src:g(r).logo,alt:"Web-synths collection logo"},null,8,Zt),h("div",qt,Q(g(a).title),1)]),Xt,h("button",{class:"text-xl",onClick:c[0]||(c[0]=y=>o.value=!g(o)),"aria-label":"Dark mode toggle"},[g(o)?(O(),T("div",en)):(O(),T("div",Qt))]),h("button",{class:"p-4 z-2000 cursor-pointer","aria-label":"Player profile",onClick:c[1]||(c[1]=y=>t.value=!g(t))},nn)]),L(p,{class:"z-100"})]),h("div",an,[L(s,{class:"w-full",id:"content"})]),L(Me,{name:"panel"},{default:J(()=>[g(t)?(O(),ze(i,{key:0,class:"fixed z-1000"},{button:J(()=>[R("JOIN THE COMMUNITY")]),notice:J(()=>[R("Your access status will be saved per device and you won't need to enter your e-mail again.")]),default:J(()=>[R("We are building a community of web-based musicians. Type in your e-mail to instantly gain full access to the collection and receive occasional community updates from us. Stay tuned! ")]),_:1})):ge("",!0)]),_:1})])}}},fn={Layout:rn,enhanceApp({app:e}){}};export{fn as R,Pt as _,dn as a,cn as b,Ee as c,Se as d,sn as e,un as u,ln as w};
