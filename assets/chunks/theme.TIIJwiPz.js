function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/chunks/virtual_pwa-register.45FOQ76u.js","assets/chunks/framework.HWRfC0Fd.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{u as H,r as i,a as U,c as B,w as q,o as Q,b as u,d as m,e as C,v as X,f as a,g as t,t as S,h,i as z,j as M,n as F,k as L,l as W,_ as ee,m as te,p as ae,q as Y,s as se,x as oe,y as b,z as y,T as ne,A as le}from"./framework.HWRfC0Fd.js";const A=H("history"),G=/^([a-zA-Z0-9._%+-]{1,64})@[a-zA-Z0-9.-]{1,255}\.[a-zA-Z]{2,10}$/,J=100,v=i(!1),D=i(!1),re=i(!1),p=U("storedEmail",""),w=U("storedName",""),x=i(!1),f=i(p),P=i(w),E=B(()=>{var s;return ue((s=f.value.match(G))==null?void 0:s[1])}),ie=i(""),ce=i(""),de=B(()=>K(f.value)),I=i(!1),T=i(!1);function K(s){return G.test(s)}function ue(s=""){return s.charAt(0).toUpperCase()+s.slice(1)}function me(){p.value="",w.value="",x.value=!1,v.value=!1}function Z(){return I.value||(q(v,s=>{s&&(D.value=!1)}),Q(()=>{p.value&&(v.value=!0),A.token&&pe()}),I.value=!0),{searchParams:A,isAccessGranted:v,isValidEmail:de,email:f,name:P,grantAccess:_e,isSent:x,isFormOpen:D,checkAvailability:re,storedEmail:p,storedName:w,resetEmail:me,namePlaceholder:E,password:ie,passwordPlaceholder:ce,generatePassword:he,maxLength:J,claimInvite:fe,invited:T}}async function pe(){console.log(A.token,p.value)}async function fe(){var s,o,n;if(p.value&&!T.value){const r={email:p.value};try{const e=await fetch("https://dbs.chromatone.center/flows/trigger/164bb1bb-3745-423f-8239-703198dfbac5",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r)});console.log(await(e==null?void 0:e.json()))}catch(e){console.error(e,(o=(s=e==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:o.message,(n=e==null?void 0:e.response)==null?void 0:n.status)}T.value=!0}}async function _e(){var s,o,n;if(!(!f.value&&!K(f.value))&&(v.value=!0,!x.value)){x.value=!0;const r={email:f.value,name:(P.value||E.value||"").slice(0,J)};try{p.value=f.value,w.value=P.value||E.value;const e=await fetch("https://dbs.chromatone.center/flows/trigger/51cc7591-219e-4b56-ad6d-c39a34f7cf2f",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r)});console.log(await(e==null?void 0:e.json()))}catch(e){console.error(e,(o=(s=e==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:o.message,(n=e==null?void 0:e.response)==null?void 0:n.status)}}}function he(){return[...window.crypto.getRandomValues(new Uint8Array(16))].map(s=>"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_.,!?$%&*#@".charAt(s%72)).join("").slice(0,10)}const ve={class:"min-h-40dvh bottom-0 w-full bg-light-800 bg-opacity-80 backdrop-blur flex flex-col items-center gap-4 justify-center dark-bg-dark-200 dark-bg-opacity-80 p-8 shadow max-w-180 bottom-0 rounded-xl"},ge={key:0,class:"flex flex-col gap-4 max-w-45ch text-center"},be={class:"text-3xl font-bold"},ye=t("div",{class:"text-xl"},"You are part of web-musicians community",-1),xe={class:"text-sm flex gap-2 justify-center"},we={key:1,class:"flex flex-col gap-8 relative pt-8 items-center"},ke={class:"text-center max-w-55ch",for:"email"},$e={class:"flex gap-4 flex-col w-full"},Ce={class:"flex items-center gap-2"},Se=t("div",{class:"p-2 w-24 font-bold text-right"},"E-mail *",-1),Ae=["maxlength"],Pe={class:"flex items-center gap-2"},Ee=t("div",{class:"p-2 w-24 font-bold text-right"},"Name",-1),Te=["maxlength","placeholder"],Ne=["disabled"],Re={__name:"FormMain",setup(s){const{name:o,email:n,isValidEmail:r,isFormOpen:e,grantAccess:c,storedEmail:N,storedName:_,resetEmail:g,isAccessGranted:k,namePlaceholder:$,passwordPlaceholder:R,password:O,generatePassword:ot,maxLength:j,claimInvite:nt,invited:lt}=Z();return i(),(V,l)=>(u(),m("div",ve,[C(t("button",{class:"i-la-times absolute top-4 right-4 text-2xl hover-opacity-90 opacity-50 transition",onClick:l[0]||(l[0]=d=>e.value=!1)},null,512),[[X,a(e)]]),a(k)?(u(),m("div",ge,[t("div",be,"Hello, "+S(a(_))+"!",1),ye,t("div",xe,[h(S(a(N)),1),t("span",{class:"opacity-20 hover-opacity-50 transition cursor-pointer",onClick:l[1]||(l[1]=(...d)=>a(g)&&a(g)(...d))},"Log out")])])):(u(),m("div",we,[t("label",ke,[z(V.$slots,"default")]),t("div",$e,[t("label",Ce,[Se,C(t("input",{class:F(["flex-1 p-4 md-p-4 rounded-xl bg-light-200 shadow-md dark-bg-dark-400 flex-1 border-2 border-solid border-opacity-60 dark-border-opacity-40",{"border-red-700 dark-border-red-300":a(n)&&!a(r),"border-green-700 dark-border-green-800":a(n)&&a(r),"border-light-300":!a(n)}]),ref:"target",maxlength:a(j),"onUpdate:modelValue":l[2]||(l[2]=d=>L(n)?n.value=d:null),id:"email",name:"email",type:"email",onKeydown:l[3]||(l[3]=W(d=>a(c)(),["enter"])),placeholder:"your@gmail.com"},null,42,Ae),[[M,a(n)]])]),t("label",Pe,[Ee,C(t("input",{class:"flex-1 p-4 md-p-4 rounded-xl bg-light-200 shadow-md dark-bg-dark-400","onUpdate:modelValue":l[4]||(l[4]=d=>L(o)?o.value=d:null),id:"name",maxlength:a(j),name:"name",type:"text",onKeydown:l[5]||(l[5]=W(d=>a(c)(),["enter"])),placeholder:a($)},null,40,Te),[[M,a(o)]])])]),t("button",{class:F(["text-sm md-text-md p-4 font-bold md-p-4 rounded-xl shadow-xl hover-shadow-2xl transition -hover-translate-y-2px disabled-opacity-40 active-translate-y-0 active-shadow-md bg-green-400 dark-bg-green-700",{"grayscale-50":!a(r)}]),onClick:l[6]||(l[6]=d=>a(c)()),disabled:!a(r),title:"Your access status will be saved per device and you won't need to enter your e-mail again."},[z(V.$slots,"button",{},()=>[h("GET ACCESS")])],10,Ne)]))]))}},Oe={class:"flex items-center gap-1 p-4 bg-light-100 bg-opacity-70 dark-bg-dark-400 dark-bg-opacity-40 w-full justify-center"},je=t("div",{class:"p-0"},"Made with ðŸ§¡ by",-1),Ve=t("a",{href:"https://shop.playtronica.com",target:"_blank"},"Playtronica ",-1),ze=t("span",null,"&",-1),Me=t("a",{href:"https://chromatone.center",target:"_blank"},"Chromatone",-1),Fe=[je,Ve,ze,Me];function Le(s,o){return u(),m("div",Oe,Fe)}const We={},De=ee(We,[["render",Le]]),Ie={key:0,class:"pwa-toast",role:"alertdialog","aria-labelledby":"pwa-message"},Ue=t("div",{class:"mb-3",id:"pwa-message"},"App ready to work offline",-1),Be={__name:"RegisterSW",setup(s){const o=i(!1);function n(){o.value=!0}async function r(){o.value=!1}return te(async()=>{const{registerSW:e}=await ae(()=>import("./virtual_pwa-register.45FOQ76u.js"),__vite__mapDeps([0,1]));e({immediate:!0,onOfflineReady:n,onRegistered(){console.info("Service Worker registered")},onRegisterError(c){console.error("Service Worker registration error!",c)}})}),(e,c)=>o.value?(u(),m("div",Ie,[Ue,t("button",{class:"pwa-cancel",type:"button",onClick:r},"Close")])):Y("",!0)}},Ye={class:"flex flex-col noise items-center relative min-h-100svh"},Ge={class:"w-full backdrop-blur-xl sticky top-0 z-100 bg-light-200 bg-opacity-60 dark-bg-dark-300 dark-bg-opacity-60"},Je={class:"flex flex items-center w-full max-w-180 mx-auto gap-4 px-2"},Ke={class:"p-2 flex items-center gap-4",href:"/"},Ze=["src"],He={class:"text-xl font-600"},qe=t("div",{class:"flex-1"},null,-1),Qe={key:0,class:"i-la-sun"},Xe={key:1,class:"i-tabler-moon-2"},et=t("div",{class:"i-ph-user-circle-duotone p-5"},null,-1),tt=[et],at={class:"flex flex-wrap w-full mx-auto flex-auto justify-center"},st={__name:"MainLayout",setup(s){const{isFormOpen:o,searchParams:n}=Z(),{theme:r,site:e,isDark:c}=se();return(N,_)=>{const g=Be,k=oe("content"),$=Re,R=De;return u(),m("div",Ye,[b(g),t("div",Ge,[t("div",Je,[t("a",Ke,[t("img",{class:"w-12",src:a(r).logo,alt:"Web-synths collection logo"},null,8,Ze),t("div",He,S(a(e).title),1)]),qe,t("button",{class:"text-xl",onClick:_[0]||(_[0]=O=>c.value=!a(c)),"aria-label":"Dark mode toggle"},[a(c)?(u(),m("div",Xe)):(u(),m("div",Qe))]),t("button",{class:"p-4 z-2000 cursor-pointer","aria-label":"Player profile",onClick:_[1]||(_[1]=O=>o.value=!a(o))},tt)])]),t("div",at,[b(k,{class:"w-full",id:"content"})]),b(ne,{name:"panel"},{default:y(()=>[a(o)?(u(),le($,{key:0,class:"fixed z-1000"},{button:y(()=>[h("JOIN THE COMMUNITY")]),notice:y(()=>[h("Your access status will be saved per device and you won't need to enter your e-mail again.")]),default:y(()=>[h("We are building a community of web-based musicians. Type in your e-mail to instantly gain full access to the collection and receive occasional community updates from us. Stay tuned! ")]),_:1})):Y("",!0)]),_:1}),b(R)])}}},it={Layout:st,enhanceApp({app:s}){}};export{it as R,Re as _,Z as u};
